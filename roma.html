<head>
  <title>roma</title>
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:300' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
</head>

<body>
  <h1>Pomiodoro</h1>

  {{> timer}}
  {{> users}}
  <audio id="pacman" src="audio/pacman_death.wav"></audio>
</body>

<template name="timer">
  <a id='pomodoro' class='start'>p</a>
  <a id='short_break' class='start'>s</a>
  <a id='long_break' class='start'>l</a>
  <a id='mega_short_break' class='start'>.</a>
  <h1 id='timer_output'>{{time}}</h1>
  {{#if complete}}
    <p>done</p>
  {{/if}}
</template>
<template name="users">
  <div id="current_user">
    {{#if edit}}
      <p>
        <input type="text" name="name" placeholder="Enter Name" value={{user.profile.name}} autofocus />
        <a class='cancel fa fa-ban'></a>
      </p>
    {{else}}
      <p>Hi, {{user.profile.name}} <a class='edit fa fa-pencil'></a></p>
    {{/if}}    
  </div>
  {{#with usersOnline}}
    <p>{{this.count}} users online</p>
    {{#each this}}
      {{#if profile.name}}
        <p class='send_message' data-user-id='{{this._id}}'>
          {{profile.name}}
          {{#if profile.pomo.type}}is on a {{profile.pomo.type}}{{else}}is a slacker{{/if}}
          {{#if profile.pomo.minute}}for {{profile.pomo.minute}} more minutes{{/if}}
        </p>
        {{#if messageUser id=this._id}}
          Send {{profile.name}} a message:
          <form class="message_form">
            <input type="text" name="message">
            <input type="hidden" name="user" value="{{this._id}}">
            <a class="cancel_message">x</a>            
          </form>
        {{/if}}
      {{/if}}
    {{/each}}  
  {{/with}}
</template>